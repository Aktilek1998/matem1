<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë”©–ª—à–µ–∫—Ç–µ—Ä ”ô–ª–µ–º—ñ–Ω–µ —Å–∞—è—Ö–∞—Ç - –ö–≤–µ—Å—Ç –æ–π—ã–Ω—ã </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            position: relative;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .quest-info {
            position: absolute;
            top: 20px;
            right: 0;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }
        
        .quest-points {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .station-selector {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .station-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            position: relative;
        }
        
        .station-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }
        
        .station-btn.active {
            background: #ffcc00;
            color: #333;
            font-weight: bold;
        }
        
        .station-btn.completed::after {
            content: '‚úì';
            position: absolute;
            top: -5px;
            right: -5px;
            background: #4CAF50;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .station {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .station.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .station-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .station-icon {
            font-size: 2rem;
            margin-right: 15px;
        }
        
        .station-title {
            font-size: 1.8rem;
        }
        
        .station-description {
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .interactive-area {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 300px;
        }
        
        .fraction-input {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .fraction-part {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        input {
            width: 60px;
            padding: 10px;
            border: none;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .fraction-line {
            width: 40px;
            height: 3px;
            background: white;
            margin: 5px 0;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            background: #4CAF50;
            border: none;
            border-radius: 8px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .result {
            text-align: center;
            font-size: 1.5rem;
            margin: 20px 0;
            min-height: 40px;
        }
        
        .achievement {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: #4CAF50;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .train-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .train-visualization {
            width: 100%;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .train-track {
            position: absolute;
            bottom: 30px;
            width: 100%;
            height: 5px;
            background: white;
        }
        
        .train {
            position: absolute;
            bottom: 10px;
            left: 0;
            width: 80px;
            height: 40px;
            background: #ff5722;
            border-radius: 10px;
            transition: left 2s ease-in-out;
        }
        
        .train::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 10px;
            width: 20px;
            height: 15px;
            background: #ff9800;
            border-radius: 5px 5px 0 0;
        }
        
        .workshop-problem {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .problem-text {
            margin-bottom: 15px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .workshop-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .workshop-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .workshop-input input {
            width: 80px;
        }
        
        .visual-feedback {
            text-align: center;
            margin-top: 20px;
            font-size: 4rem;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .visual-feedback.show {
            opacity: 1;
        }
        
        .math-fraction {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            margin: 0 5px;
        }
        
        .math-fraction .numerator {
            display: block;
            border-bottom: 1px solid white;
            padding: 0 5px;
        }
        
        .math-fraction .denominator {
            display: block;
            padding: 0 5px;
        }
        
        .math-mixed {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .quest-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            display: none;
            backdrop-filter: blur(10px);
            border: 2px solid #ffcc00;
            animation: popIn 0.5s ease;
        }
        
        @keyframes popIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        .quest-popup.show {
            display: block;
        }
        
        .quest-popup h3 {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #ffcc00;
        }
        
        .quest-popup p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ffcc00;
            opacity: 0;
            z-index: 999;
        }
        
        .quest-indicator {
            display: inline-block;
            margin-left: 10px;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        .transform-task {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .math-expression {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }
        
        /* –ù–µ–≥—ñ–∑–¥–µ—Ä “õ–∞–ª–∞—Å—ã “Ø—à—ñ–Ω –∂–∞“£–∞ —Å—Ç–∏–ª—å–¥–µ—Ä */
        .basics-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .basics-column {
            text-align: center;
            flex: 1;
            min-width: 250px;
        }
        
        .fraction-item, .type-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: move;
            transition: all 0.3s ease;
        }
        
        .fraction-item:hover, .type-item:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }
        
        .type-item {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –ü–∏—Ü—Ü–∞ —Ñ–∞–±—Ä–∏–∫–∞—Å—ã “Ø—à—ñ–Ω –∂–∞“£–∞ —Å—Ç–∏–ª—å–¥–µ—Ä */
        .pizza-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .pizza {
            width: 150px;
            height: 150px;
            position: relative;
        }
        
        .pizza-base {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                #ffa500 0% 50%, 
                #f4a460 50% 100%
            );
            position: relative;
            overflow: hidden;
        }
        
        .pizza-slice {
            position: absolute;
            width: 50%;
            height: 100%;
            left: 50%;
            top: 0;
            transform-origin: left center;
            background: conic-gradient(
                #ffa500 0% 100%
            );
            clip-path: polygon(0 0, 100% 50%, 0 100%);
        }
        
        .pizza-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.6);
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 1.2rem;
        }
        
        .pizza-feedback {
            text-align: center;
            margin-top: 15px;
            font-size: 1.3rem;
            min-height: 30px;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .station-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .workshop-controls {
                flex-direction: column;
            }
            
            .quest-info {
                position: relative;
                top: 0;
                margin-top: 15px;
            }
            
            .pizza {
                width: 120px;
                height: 120px;
            }
            
            .basics-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>–ë”©–ª—à–µ–∫—Ç–µ—Ä ”ô–ª–µ–º—ñ–Ω–µ —Å–∞—è—Ö–∞—Ç</h1>
            <p class="subtitle">–ö–≤–µ—Å—Ç –æ–π—ã–Ω—ã - –ë–∞—Ä–ª—ã“õ —Å—Ç–∞–Ω—Ü–∏—è–ª–∞—Ä–¥—ã –∞—è“õ—Ç–∞–ø, “∞–ª—ã –º–∞—Ç–µ–º–∞—Ç–∏–∫ –¥”ô—Ä–µ–∂–µ—Å—ñ–Ω–µ –∂–µ—Ç!</p>
            <div class="quest-info">
                <div class="quest-points">“∞–ø–∞–π: <span id="quest-points">0</span></div>
                <div>–î”ô—Ä–µ–∂–µ: <span id="quest-rank">–ñ–∞“£–∞–¥–∞–Ω –∫–µ–ª–≥–µ–Ω</span></div>
            </div>
        </header>
        
        <div class="station-selector">
            <button class="station-btn active" data-station="basics">
                –ù–µ–≥—ñ–∑–¥–µ—Ä “õ–∞–ª–∞—Å—ã <span class="quest-indicator" id="basics-indicator">0/4</span>
            </button>
            <button class="station-btn" data-station="transform">
                –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä–ª–∞—Ä –±–µ–∫–µ—Ç—ñ <span class="quest-indicator" id="transform-indicator">0/3</span>
            </button>
            <button class="station-btn" data-station="pizza">
                –ü–∏—Ü—Ü–∞ —Ñ–∞–±—Ä–∏–∫–∞—Å—ã <span class="quest-indicator" id="pizza-indicator">0/3</span>
            </button>
            <button class="station-btn" data-station="train">
                –ñ—ã–ª–¥–∞–º –ø–æ–µ–∑–¥ <span class="quest-indicator" id="train-indicator">0/3</span>
            </button>
            <button class="station-btn" data-station="workshop">
                –®–µ–±–µ—Ä—Ö–∞–Ω–∞ <span class="quest-indicator" id="workshop-indicator">0/2</span>
            </button>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <!-- –ù–µ–≥—ñ–∑–¥–µ—Ä “õ–∞–ª–∞—Å—ã —Å—Ç–∞–Ω—Ü–∏—è—Å—ã -->
        <div class="station active" id="basics">
            <div class="station-header">
                <div class="station-icon">üèõÔ∏è</div>
                <h2 class="station-title">–ù–µ–≥—ñ–∑–¥–µ—Ä “õ–∞–ª–∞—Å—ã</h2>
            </div>
            <p class="station-description">–ë”©–ª—à–µ–∫ —Ç“Ø—Ä–ª–µ—Ä—ñ–Ω “Ø–π—Ä–µ–Ω—É “Ø—à—ñ–Ω –±“±–ª —Å—Ç–∞–Ω—Ü–∏—è–¥–∞ –æ–ª–∞—Ä–¥—ã —Å“Ø–π—Ä–µ–ø —Å”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É –∫–µ—Ä–µ–∫. <strong>–ö–≤–µ—Å—Ç: 4 –±”©–ª—à–µ–∫—Ç—ñ –¥“±—Ä—ã—Å —Å”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä</strong></p>
            
            <div class="interactive-area">
                <div class="basics-container">
                    <div class="basics-column">
                        <h3>–ë”©–ª—à–µ–∫—Ç–µ—Ä</h3>
                        <div id="fractions-container" style="min-height: 200px; margin-top: 20px;">
                            <div class="fraction-item" data-type="proper" draggable="true">
                                <span class="math-fraction">
                                    <span class="numerator">1</span>
                                    <span class="denominator">2</span>
                                </span>
                            </div>
                            <div class="fraction-item" data-type="improper" draggable="true">
                                <span class="math-fraction">
                                    <span class="numerator">5</span>
                                    <span class="denominator">4</span>
                                </span>
                            </div>
                            <div class="fraction-item" data-type="mixed" draggable="true">
                                <span class="math-mixed">
                                    2 <span class="math-fraction">
                                        <span class="numerator">1</span>
                                        <span class="denominator">3</span>
                                    </span>
                                </span>
                            </div>
                            <div class="fraction-item" data-type="proper" draggable="true">
                                <span class="math-fraction">
                                    <span class="numerator">3</span>
                                    <span class="denominator">5</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="basics-column">
                        <h3>–ë”©–ª—à–µ–∫ —Ç“Ø—Ä–ª–µ—Ä—ñ</h3>
                        <div id="types-container" style="min-height: 200px; margin-top: 20px;">
                            <div class="type-item" data-type="proper">–î“±—Ä—ã—Å –±”©–ª—à–µ–∫</div>
                            <div class="type-item" data-type="improper">–ë“±—Ä—ã—Å –±”©–ª—à–µ–∫</div>
                            <div class="type-item" data-type="mixed">–ê—Ä–∞–ª–∞—Å —Å–∞–Ω</div>
                            <div class="type-item" data-type="proper">–î“±—Ä—ã—Å –±”©–ª—à–µ–∫</div>
                        </div>
                    </div>
                </div>
                
                <div class="result" id="basics-result"></div>
                
                <div class="controls">
                    <button id="check-basics">–¢–µ–∫—Å–µ—Ä—É</button>
                    <button id="reset-basics">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                </div>
            </div>
            
            <div class="achievement">
                <p>üéØ –ö–≤–µ—Å—Ç: 4 –±”©–ª—à–µ–∫—Ç—ñ –¥“±—Ä—ã—Å —Å”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä - <strong id="basics-quest">0/4</strong></p>
            </div>
        </div>
        
        <!-- –ü–∏—Ü—Ü–∞ —Ñ–∞–±—Ä–∏–∫–∞—Å—ã —Å—Ç–∞–Ω—Ü–∏—è—Å—ã -->
        <div class="station" id="pizza">
            <div class="station-header">
                <div class="station-icon">üçï</div>
                <h2 class="station-title">–ü–∏—Ü—Ü–∞ —Ñ–∞–±—Ä–∏–∫–∞—Å—ã</h2>
            </div>
            <p class="station-description">–ü–∏—Ü—Ü–∞–ª–∞—Ä–¥—ã “õ–æ—Å—É –∞—Ä“õ—ã–ª—ã –±”©–ª—à–µ–∫—Ç–µ—Ä–¥—ñ “õ–∞–ª–∞–π “õ–æ—Å–∞—Ç—ã–Ω—ã“£—ã–∑–¥—ã “Ø–π—Ä–µ–Ω—ñ“£—ñ–∑. <strong>–ö–≤–µ—Å—Ç: 3 –±”©–ª—à–µ–∫—Ç—ñ –¥“±—Ä—ã—Å “õ–æ—Å</strong></p>
            
            <div class="interactive-area">
                <div class="pizza-container">
                    <div class="pizza">
                        <div class="pizza-base" id="pizza1">
                            <div class="pizza-label" id="pizza1-label">
                                <span class="math-fraction">
                                    <span class="numerator">1</span>
                                    <span class="denominator">2</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; font-size: 2rem;">+</div>
                    
                    <div class="pizza">
                        <div class="pizza-base" id="pizza2">
                            <div class="pizza-label" id="pizza2-label">
                                <span class="math-fraction">
                                    <span class="numerator">1</span>
                                    <span class="denominator">4</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; font-size: 2rem;">=</div>
                    
                    <div class="pizza">
                        <div class="pizza-base" id="result-pizza">
                            <div class="pizza-label" id="result-label">?</div>
                        </div>
                    </div>
                </div>
                
                <div class="pizza-feedback" id="pizza-feedback"></div>
                
                <div class="fraction-input">
                    <div class="fraction-part">
                        <input type="number" id="num1" value="1" min="1" max="8">
                        <div class="fraction-line"></div>
                        <input type="number" id="den1" value="2" min="1" max="8">
                    </div>
                    
                    <div style="font-size: 2rem; margin: 0 10px;">+</div>
                    
                    <div class="fraction-part">
                        <input type="number" id="num2" value="1" min="1" max="8">
                        <div class="fraction-line"></div>
                        <input type="number" id="den2" value="4" min="1" max="8">
                    </div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <p>–ù”ô—Ç–∏–∂–µ–Ω—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:</p>
                    <div class="fraction-input">
                        <div class="fraction-part">
                            <input type="number" id="user-result-num" placeholder="?">
                            <div class="fraction-line"></div>
                            <input type="number" id="user-result-den" placeholder="?">
                        </div>
                    </div>
                </div>
                
                <div class="controls">
                    <button id="check-pizza">–¢–µ–∫—Å–µ—Ä—É</button>
                    <button id="random-pizza">–ö–µ–∑–¥–µ–π—Å–æ“õ –º—ã—Å–∞–ª</button>
                </div>
            </div>
            
            <div class="achievement">
                <p>üéØ –ö–≤–µ—Å—Ç: 3 –±”©–ª—à–µ–∫—Ç—ñ –¥“±—Ä—ã—Å “õ–æ—Å - <strong id="pizza-quest">0/3</strong></p>
            </div>
        </div>
        
        <!-- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä–ª–∞—Ä –±–µ–∫–µ—Ç—ñ —Å—Ç–∞–Ω—Ü–∏—è—Å—ã -->
        <div class="station" id="transform">
            <div class="station-header">
                <div class="station-icon">üîÅ</div>
                <h2 class="station-title">–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä–ª–∞—Ä –±–µ–∫–µ—Ç—ñ</h2>
            </div>
            <p class="station-description">–ê—Ä–∞–ª–∞—Å —Å–∞–Ω–¥–∞—Ä–¥—ã –±“±—Ä—ã—Å –±”©–ª—à–µ–∫–∫–µ –∂”ô–Ω–µ –∫–µ—Ä—ñ—Å—ñ–Ω—à–µ —Ç“Ø—Ä–ª–µ–Ω–¥—ñ—Ä—É–¥—ñ “Ø–π—Ä–µ–Ω—ñ“£—ñ–∑. <strong>–ö–≤–µ—Å—Ç: 3 —Ç“Ø—Ä–ª–µ–Ω–¥—ñ—Ä—É–¥—ñ –¥“±—Ä—ã—Å –æ—Ä—ã–Ω–¥–∞</strong></p>
            
            <div class="interactive-area">
                <div style="display: flex; flex-direction: column; align-items: center; gap: 30px;">
                    <!-- 1-—Ç–∞–ø—Å—ã—Ä–º–∞: –ê—Ä–∞–ª–∞—Å —Å–∞–Ω ‚Üí –ë“±—Ä—ã—Å –±”©–ª—à–µ–∫ -->
                    <div class="transform-task">
                        <h3>–ê—Ä–∞–ª–∞—Å —Å–∞–Ω–¥—ã –±“±—Ä—ã—Å –±”©–ª—à–µ–∫–∫–µ —Ç“Ø—Ä–ª–µ–Ω–¥—ñ—Ä—É</h3>
                        <div class="math-expression">
                            <span id="mixed-number">
                                <span class="math-mixed">
                                    <span id="current-whole">2</span> 
                                    <span class="math-fraction">
                                        <span class="numerator" id="current-num">3</span>
                                        <span class="denominator" id="current-den">4</span>
                                    </span>
                                </span>
                            </span>
                            <span>=</span>
                            <div class="fraction-input">
                                <div class="fraction-part">
                                    <input type="number" id="user-improper-num" placeholder="?">
                                    <div class="fraction-line"></div>
                                    <input type="number" id="user-improper-den" placeholder="?">
                                </div>
                            </div>
                        </div>
                        <button id="check-to-improper">–¢–µ–∫—Å–µ—Ä—É</button>
                    </div>
                    
                    <!-- 2-—Ç–∞–ø—Å—ã—Ä–º–∞: –ë“±—Ä—ã—Å –±”©–ª—à–µ–∫ ‚Üí –ê—Ä–∞–ª–∞—Å —Å–∞–Ω -->
                    <div class="transform-task">
                        <h3>–ë“±—Ä—ã—Å –±”©–ª—à–µ–∫—Ç—ñ –∞—Ä–∞–ª–∞—Å —Å–∞–Ω“ì–∞ —Ç“Ø—Ä–ª–µ–Ω–¥—ñ—Ä—É</h3>
                        <div class="math-expression">
                            <span id="improper-fraction">
                                <span class="math-fraction">
                                    <span class="numerator" id="current-improper-num">7</span>
                                    <span class="denominator" id="current-improper-den">3</span>
                                </span>
                            </span>
                            <span>=</span>
                            <div class="fraction-input">
                                <input type="number" id="user-mixed-whole" placeholder="0" min="0">
                                <div class="fraction-part" style="margin-left: 10px;">
                                    <input type="number" id="user-mixed-num" placeholder="?">
                                    <div class="fraction-line"></div>
                                    <input type="number" id="user-mixed-den" placeholder="?">
                                </div>
                            </div>
                        </div>
                        <button id="check-to-mixed">–¢–µ–∫—Å–µ—Ä—É</button>
                    </div>
                </div>
                
                <div class="result" id="transform-result"></div>
                
                <div class="controls">
                    <button id="random-transform">–ö–µ–∑–¥–µ–π—Å–æ“õ –º—ã—Å–∞–ª</button>
                </div>
            </div>
            
            <div class="achievement">
                <p>üéØ –ö–≤–µ—Å—Ç: 3 —Ç“Ø—Ä–ª–µ–Ω–¥—ñ—Ä—É–¥—ñ –¥“±—Ä—ã—Å –æ—Ä—ã–Ω–¥–∞ - <strong id="transform-quest">0/3</strong></p>
            </div>
        </div>
        
        <!-- –ñ—ã–ª–¥–∞–º –ø–æ–µ–∑–¥ —Å—Ç–∞–Ω—Ü–∏—è—Å—ã -->
        <div class="station" id="train">
            <div class="station-header">
                <div class="station-icon">üöÑ</div>
                <h2 class="station-title">–ñ—ã–ª–¥–∞–º –ø–æ–µ–∑–¥</h2>
            </div>
            <p class="station-description">–ë”©–ª—à–µ–∫—Ç–µ—Ä–¥—ñ –∫”©–±–µ–π—Ç—É –∂”ô–Ω–µ –±”©–ª—É–¥—ñ “Ø–π—Ä–µ–Ω—É “Ø—à—ñ–Ω –¥–∞–π—ã–Ω–¥–∞–ª—ã“£—ã–∑! <strong>–ö–≤–µ—Å—Ç: 3 –µ—Å–µ–ø—Ç—ñ –¥“±—Ä—ã—Å —à–µ—à</strong></p>
            
            <div class="interactive-area">
                <div class="train-container">
                    <div class="train-visualization">
                        <div class="train-track"></div>
                        <div class="train" id="train-element"></div>
                    </div>
                    
                    <div class="problem-text">
                        –ü–æ–π—ã–∑ <span id="train-time">
                            <span class="math-fraction">
                                <span class="numerator" id="time-num">2</span>
                                <span class="denominator" id="time-den">3</span>
                            </span>
                        </span> —Å–∞“ì–∞—Ç—Ç–∞ <span id="train-distance">
                            <span class="math-fraction">
                                <span class="numerator" id="distance-num">4</span>
                                <span class="denominator" id="distance-den">5</span>
                            </span>
                        </span> –∫–º –∂–æ–ª –∂“Ø—Ä–µ–¥—ñ. 
                        –ü–æ–π—ã–∑–¥—ã“£ –∂—ã–ª–¥–∞–º–¥—ã“ì—ã “õ–∞–Ω—à–∞?
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <p>–ñ—ã–ª–¥–∞–º–¥—ã“õ—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑ (–∫–º/—Å–∞“ì):</p>
                        <div class="fraction-input">
                            <div class="fraction-part">
                                <input type="number" id="train-result-num" placeholder="?">
                                <div class="fraction-line"></div>
                                <input type="number" id="train-result-den" placeholder="?">
                            </div>
                        </div>
                    </div>
                    
                    <div class="result" id="train-result"></div>
                    
                    <div class="controls">
                        <button id="calculate-train">–¢–µ–∫—Å–µ—Ä—É</button>
                        <button id="random-train">–ö–µ–∑–¥–µ–π—Å–æ“õ –µ—Å–µ–ø</button>
                    </div>
                </div>
            </div>
            
            <div class="achievement">
                <p>üéØ –ö–≤–µ—Å—Ç: 3 –µ—Å–µ–ø—Ç—ñ –¥“±—Ä—ã—Å —à–µ—à - <strong id="train-quest">0/3</strong></p>
            </div>
        </div>
        
        <!-- –®–µ–±–µ—Ä—Ö–∞–Ω–∞ —Å—Ç–∞–Ω—Ü–∏—è—Å—ã -->
        <div class="station" id="workshop">
            <div class="station-header">
                <div class="station-icon">üîß</div>
                <h2 class="station-title">–®–µ–±–µ—Ä—Ö–∞–Ω–∞</h2>
            </div>
            <p class="station-description">–ë–∞—Ä–ª—ã“õ –±—ñ–ª—ñ–º–¥–µ—Ä—ñ“£—ñ–∑–¥—ñ –∂–∏–Ω–∞“õ—Ç–∞–ø, –Ω–∞“õ—Ç—ã ”©–º—ñ—Ä –µ—Å–µ–ø—Ç–µ—Ä—ñ–Ω —à–µ—à—ñ“£—ñ–∑! <strong>–ö–≤–µ—Å—Ç: 2 –µ—Å–µ–ø—Ç—ñ –¥“±—Ä—ã—Å —à–µ—à</strong></p>
            
            <div class="interactive-area">
                <div class="workshop-problem" id="workshop-problem-1">
                    <div class="problem-text">
                        <strong>–¢–æ—Ä—Ç –ø—ñ—Å—ñ—Ä—É:</strong> –†–µ—Ü–µ–ø—Ç –±–æ–π—ã–Ω—à–∞ <span id="recipe-amount">
                            <span class="math-mixed">
                                2 <span class="math-fraction">
                                    <span class="numerator">1</span>
                                    <span class="denominator">2</span>
                                </span>
                            </span>
                        </span> —Å—Ç–∞–∫–∞–Ω “±–Ω “õ–∞–∂–µ—Ç. 
                        –ï–≥–µ—Ä —Å—ñ–∑ —Ç–æ—Ä—Ç—Ç—ã –∂–∞—Ä—Ç—ã–ª–∞–π –ø—ñ—Å—ñ—Ä–≥—ñ“£—ñ–∑ –∫–µ–ª—Å–µ, “õ–∞–Ω—à–∞ “±–Ω “õ–∞–∂–µ—Ç –±–æ–ª–∞–¥—ã?
                    </div>
                    <div class="workshop-controls">
                        <div class="workshop-input">
                            <input type="number" id="workshop-whole-1" placeholder="0" min="0">
                            <div class="fraction-part">
                                <input type="number" id="workshop-num-1" placeholder="1" min="1">
                                <div class="fraction-line"></div>
                                <input type="number" id="workshop-den-1" placeholder="2" min="2">
                            </div>
                            <span>—Å—Ç–∞–∫–∞–Ω</span>
                        </div>
                        <button id="check-workshop-1">–¢–µ–∫—Å–µ—Ä—É</button>
                    </div>
                    <div class="visual-feedback" id="cake-visual">üéÇ</div>
                </div>
                
                <div class="workshop-problem" id="workshop-problem-2">
                    <div class="problem-text">
                        <strong>“ö“±—Ä—ã–ª—ã—Å:</strong> “∞–∑—ã–Ω–¥—ã“ì—ã <span id="stick-length">
                            <span class="math-mixed">
                                4 <span class="math-fraction">
                                    <span class="numerator">3</span>
                                    <span class="denominator">8</span>
                                </span>
                            </span>
                        </span> –º–µ—Ç—Ä –±–æ–ª–∞—Ç—ã–Ω —Ç–∞—è“õ—à–∞–Ω—ã 
                        <span id="stick-parts">3</span> —Ç–µ“£ –±”©–ª—ñ–∫–∫–µ –±”©–ª—É –∫–µ—Ä–µ–∫. ”ò—Ä –±”©–ª—ñ–∫—Ç—ñ“£ “±–∑—ã–Ω–¥—ã“ì—ã “õ–∞–Ω—à–∞?
                    </div>
                    <div class="workshop-controls">
                        <div class="workshop-input">
                            <input type="number" id="workshop-whole-2" placeholder="0" min="0">
                            <div class="fraction-part">
                                <input type="number" id="workshop-num-2" placeholder="1" min="1">
                                <div class="fraction-line"></div>
                                <input type="number" id="workshop-den-2" placeholder="2" min="2">
                            </div>
                            <span>–º–µ—Ç—Ä</span>
                        </div>
                        <button id="check-workshop-2">–¢–µ–∫—Å–µ—Ä—É</button>
                    </div>
                    <div class="visual-feedback" id="stick-visual">üìè</div>
                </div>
                
                <div class="result" id="workshop-result"></div>
                
                <div class="controls">
                    <button id="random-workshop">–ö–µ–∑–¥–µ–π—Å–æ“õ –µ—Å–µ–ø—Ç–µ—Ä</button>
                    <button id="reset-workshop">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                </div>
            </div>
            
            <div class="achievement">
                <p>üéØ –ö–≤–µ—Å—Ç: 2 –µ—Å–µ–ø—Ç—ñ –¥“±—Ä—ã—Å —à–µ—à - <strong id="workshop-quest">0/2</strong></p>
            </div>
        </div>
    </div>

    <!-- –ö–≤–µ—Å—Ç –∞—è“õ—Ç–∞—É –ø–æ–ø–∞–ø—ã -->
    <div class="quest-popup" id="quest-complete">
        <h3>–ö–≤–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã!</h3>
        <p id="quest-message"></p>
        <p>+<span id="quest-reward">0</span> “±–ø–∞–π</p>
        <button id="close-quest">–ñ–∞–±—É</button>
    </div>

    <div class="quest-popup" id="game-complete">
        <h3>“ö“±—Ç—Ç—ã“õ—Ç–∞–π–º—ã–∑!</h3>
        <p>–°—ñ–∑ –±–∞—Ä–ª—ã“õ –∫–≤–µ—Å—Ç—Ç–µ—Ä–¥—ñ –∞—è“õ—Ç–∞–¥—ã“£—ã–∑ –∂”ô–Ω–µ <strong>“∞–ª—ã –º–∞—Ç–µ–º–∞—Ç–∏–∫</strong> –¥”ô—Ä–µ–∂–µ—Å—ñ–Ω–µ –∏–µ –±–æ–ª–¥—ã“£—ã–∑!</p>
        <p>–ñ–∏–Ω–∞–ª“ì–∞–Ω “±–ø–∞–π: <span id="total-points">0</span></p>
        <button id="restart-game">“ö–∞–π—Ç–∞ –æ–π–Ω–∞—É</button>
    </div>

    <script>
        // –ö–≤–µ—Å—Ç –∂“Ø–π–µ—Å—ñ
        const quests = {
            basics: { completed: 0, required: 4, points: 100 },
            transform: { completed: 0, required: 3, points: 150 },
            pizza: { completed: 0, required: 3, points: 120 },
            train: { completed: 0, required: 3, points: 180 },
            workshop: { completed: 0, required: 2, points: 200 }
        };

        let totalPoints = 0;
        let gameCompleted = false;

        // –ö–≤–µ—Å—Ç—Ç—ñ –∂–∞“£–∞—Ä—Ç—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
        function updateQuest(station, completed) {
            if (quests[station].completed < quests[station].required) {
                quests[station].completed = completed;
                
                // –ö–≤–µ—Å—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã–Ω –∂–∞“£–∞—Ä—Ç—É
                document.getElementById(`${station}-indicator`).textContent = 
                    `${quests[station].completed}/${quests[station].required}`;
                document.getElementById(`${station}-quest`).textContent = 
                    `${quests[station].completed}/${quests[station].required}`;
                
                // –ö–≤–µ—Å—Ç –∞—è“õ—Ç–∞–ª“ì–∞–Ω–¥–∞
                if (quests[station].completed >= quests[station].required) {
                    // “∞–ø–∞–π “õ–æ—Å—É
                    totalPoints += quests[station].points;
                    document.getElementById('quest-points').textContent = totalPoints;
                    
                    // –°—Ç–∞–Ω—Ü–∏—è —Ç“Ø–π–º–µ—Å—ñ–Ω –±–µ–ª–≥—ñ–ª–µ—É
                    document.querySelector(`.station-btn[data-station="${station}"]`).classList.add('completed');
                    
                    // –ü–æ–ø–∞–ø –∫”©—Ä—Å–µ—Ç—É
                    document.getElementById('quest-message').textContent = 
                        `${getStationName(station)} –∫–≤–µ—Å—Ç—ñ –∞—è“õ—Ç–∞–ª–¥—ã!`;
                    document.getElementById('quest-reward').textContent = quests[station].points;
                    document.getElementById('quest-complete').classList.add('show');
                    
                    // –î”ô—Ä–µ–∂–µ–Ω—ñ –∂–∞“£–∞—Ä—Ç—É
                    updateRank();
                    
                    // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏—è—Å—ã
                    createConfetti();
                }
                
                // –ñ–∞–ª–ø—ã –ø—Ä–æ–≥—Ä–µ—Å—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
                updateProgress();
                
                // –û–π—ã–Ω –∞—è“õ—Ç–∞–ª“ì–∞–Ω–¥—ã“ì—ã–Ω —Ç–µ–∫—Å–µ—Ä—É
                checkGameCompletion();
            }
        }

        // –°—Ç–∞–Ω—Ü–∏—è –∞—Ç–∞—É—ã–Ω –∞–ª—É
        function getStationName(station) {
            const names = {
                basics: "–ù–µ–≥—ñ–∑–¥–µ—Ä “õ–∞–ª–∞—Å—ã",
                transform: "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä–ª–∞—Ä –±–µ–∫–µ—Ç—ñ",
                pizza: "–ü–∏—Ü—Ü–∞ —Ñ–∞–±—Ä–∏–∫–∞—Å—ã",
                train: "–ñ—ã–ª–¥–∞–º –ø–æ–µ–∑–¥",
                workshop: "–®–µ–±–µ—Ä—Ö–∞–Ω–∞"
            };
            return names[station];
        }

        // –î”ô—Ä–µ–∂–µ–Ω—ñ –∂–∞“£–∞—Ä—Ç—É
        function updateRank() {
            let rank = "–ñ–∞“£–∞–¥–∞–Ω –∫–µ–ª–≥–µ–Ω";
            if (totalPoints >= 100) rank = "–ë”©–ª—à–µ–∫—Ç–µ—Ä –∑–µ—Ä—Ç—Ç–µ—É—à—ñ—Å—ñ";
            if (totalPoints >= 300) rank = "–ú–∞—Ç–µ–º–∞—Ç–∏–∫ —à”ô–∫—ñ—Ä—Ç—ñ";
            if (totalPoints >= 500) rank = "–ë”©–ª—à–µ–∫—Ç–µ—Ä —à–µ–±–µ—Ä—ñ";
            if (totalPoints >= 750) rank = "“∞–ª—ã –º–∞—Ç–µ–º–∞—Ç–∏–∫";
            
            document.getElementById('quest-rank').textContent = rank;
        }

        // –ñ–∞–ª–ø—ã –ø—Ä–æ–≥—Ä–µ—Å—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
        function updateProgress() {
            let totalCompleted = 0;
            let totalRequired = 0;
            
            for (const station in quests) {
                totalCompleted += Math.min(quests[station].completed, quests[station].required);
                totalRequired += quests[station].required;
            }
            
            const progressPercent = (totalCompleted / totalRequired) * 100;
            document.getElementById('progress').style.width = `${progressPercent}%`;
        }

        // –û–π—ã–Ω –∞—è“õ—Ç–∞–ª“ì–∞–Ω–¥—ã“ì—ã–Ω —Ç–µ–∫—Å–µ—Ä—É
        function checkGameCompletion() {
            if (gameCompleted) return;
            
            for (const station in quests) {
                if (quests[station].completed < quests[station].required) {
                    return;
                }
            }
            
            // –ë–∞—Ä–ª—ã“õ –∫–≤–µ—Å—Ç—Ç–µ—Ä –∞—è“õ—Ç–∞–ª“ì–∞–Ω
            gameCompleted = true;
            document.getElementById('total-points').textContent = totalPoints;
            document.getElementById('game-complete').classList.add('show');
            createConfetti(50);
        }

        // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏—è—Å—ã
        function createConfetti(count = 30) {
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                document.body.appendChild(confetti);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è
                setTimeout(() => {
                    confetti.style.opacity = '1';
                    confetti.style.transition = 'all 1s ease';
                    confetti.style.top = `${Math.random() * 100 + 100}%`;
                    confetti.style.left = `${Math.random() * 100}%`;
                }, 10);
                
                // –ñ–æ—é
                setTimeout(() => {
                    confetti.remove();
                }, 2000);
            }
        }

        // –ï“Æ–û–ë —Ç–∞–±—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
        function findGCD(a, b) {
            return b === 0 ? a : findGCD(b, a % b);
        }

        // –ë”©–ª—à–µ–∫—Ç—ñ –∂–∞–π—ã —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
        function simplifyFraction(numerator, denominator) {
            const gcd = findGCD(numerator, denominator);
            return {
                numerator: numerator / gcd,
                denominator: denominator / gcd
            };
        }

        // –°—Ç–∞–Ω—Ü–∏—è–ª–∞—Ä–¥—ã –±–∞—Å“õ–∞—Ä—É
        document.querySelectorAll('.station-btn').forEach(button => {
            button.addEventListener('click', function() {
                // –ë–µ–ª—Å–µ–Ω–¥—ñ —Ç“Ø–π–º–µ–Ω—ñ ”©–∑–≥–µ—Ä—Ç—É
                document.querySelectorAll('.station-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                
                // –ë–µ–ª—Å–µ–Ω–¥—ñ —Å—Ç–∞–Ω—Ü–∏—è–Ω—ã ”©–∑–≥–µ—Ä—Ç—É
                const stationId = this.getAttribute('data-station');
                document.querySelectorAll('.station').forEach(station => {
                    station.classList.remove('active');
                });
                document.getElementById(stationId).classList.add('active');
            });
        });
        
        // –ù–µ–≥—ñ–∑–¥–µ—Ä “õ–∞–ª–∞—Å—ã —Å—Ç–∞–Ω—Ü–∏—è—Å—ã
        let draggedItem = null;
        let basicsCompleted = 0;
        
        document.querySelectorAll('.fraction-item').forEach(item => {
            item.addEventListener('dragstart', function() {
                draggedItem = this;
                setTimeout(() => this.style.display = 'none', 0);
            });
            
            item.addEventListener('dragend', function() {
                setTimeout(() => this.style.display = 'block', 0);
                draggedItem = null;
            });
        });
        
        document.querySelectorAll('.type-item').forEach(item => {
            item.addEventListener('dragover', function(e) {
                e.preventDefault();
            });
            
            item.addEventListener('dragenter', function(e) {
                e.preventDefault();
                this.style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
            });
            
            item.addEventListener('dragleave', function() {
                this.style.backgroundColor = '';
            });
            
            item.addEventListener('drop', function() {
                this.style.backgroundColor = '';
                if (draggedItem.getAttribute('data-type') === this.getAttribute('data-type')) {
                    this.innerHTML = draggedItem.innerHTML + ' - ' + this.innerHTML;
                    draggedItem.style.display = 'none';
                    document.getElementById('basics-result').textContent = '–î“±—Ä—ã—Å!';
                    document.getElementById('basics-result').style.color = '#4CAF50';
                    
                    // –ö–≤–µ—Å—Ç—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
                    basicsCompleted++;
                    updateQuest('basics', basicsCompleted);
                } else {
                    document.getElementById('basics-result').textContent = '“ö–∞—Ç–µ, “õ–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑!';
                    document.getElementById('basics-result').style.color = '#f44336';
                }
            });
        });
        
        document.getElementById('reset-basics').addEventListener('click', function() {
            document.querySelectorAll('.fraction-item').forEach(item => {
                item.style.display = 'block';
                // –ë–∞—Å—Ç–∞–ø“õ—ã –∫“Ø–π–≥–µ “õ–∞–π—Ç–∞—Ä—É
                const type = item.getAttribute('data-type');
                if (type === 'proper') {
                    if (item.querySelector('.math-fraction .numerator').textContent === '1') {
                        item.innerHTML = '<span class="math-fraction"><span class="numerator">1</span><span class="denominator">2</span></span>';
                    } else {
                        item.innerHTML = '<span class="math-fraction"><span class="numerator">3</span><span class="denominator">5</span></span>';
                    }
                } else if (type === 'improper') {
                    item.innerHTML = '<span class="math-fraction"><span class="numerator">5</span><span class="denominator">4</span></span>';
                } else if (type === 'mixed') {
                    item.innerHTML = '<span class="math-mixed">2 <span class="math-fraction"><span class="numerator">1</span><span class="denominator">3</span></span></span>';
                }
            });
            document.querySelectorAll('.type-item').forEach(item => {
                const type = item.getAttribute('data-type');
                item.textContent = type === 'proper' ? '–î“±—Ä—ã—Å –±”©–ª—à–µ–∫' : 
                                  type === 'improper' ? '–ë“±—Ä—ã—Å –±”©–ª—à–µ–∫' : '–ê—Ä–∞–ª–∞—Å —Å–∞–Ω';
            });
            document.getElementById('basics-result').textContent = '';
        });
        
        // –ü–∏—Ü—Ü–∞ —Ñ–∞–±—Ä–∏–∫–∞—Å—ã —Å—Ç–∞–Ω—Ü–∏—è—Å—ã
        let pizzaCompleted = 0;
        const pizzaCompliments = [
            "–ö–µ—Ä–µ–º–µ—Ç! üéâ",
            "–¢–∞–º–∞—à–∞! üëç", 
            "–ñ–∞“õ—Å—ã –∂“±–º—ã—Å! üëè",
            "–°–µ–Ω –±—ñ—Ä —Ç–∞–ª–∞–Ω—Ç—Å—ã“£! üåü",
            "–ö–µ—Ä–µ–º–µ—Ç –µ—Å–µ–ø—Ç–µ–¥—ñ“£! üßÆ",
            "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –¥–∞–Ω—ã—à–ø–∞–Ω—ã! üéì"
        ];
        
        const pizzaTypes = [
            { name: "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞", color1: "#ff4444", color2: "#ff8888" },
            { name: "–ü–µ–ø–µ—Ä–æ–Ω–∏", color1: "#cc0000", color2: "#ff6666" },
            { name: "–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–¥—ã“õ", color1: "#44aa44", color2: "#88cc88" },
            { name: "–¢–µ“£—ñ–∑ ”©–Ω—ñ–º–¥–µ—Ä—ñ", color1: "#4444ff", color2: "#8888ff" },
            { name: "–ì—Ä–∏–ª—å–¥—ñ", color1: "#ff8844", color2: "#ffbb88" },
            { name: "–ê—Ä–∞–ª–∞—Å", color1: "#aa44aa", color2: "#cc88cc" }
        ];

        function drawPizza(pizzaId, numerator, denominator, pizzaType = null) {
            const pizza = document.getElementById(pizzaId);
            pizza.innerHTML = '';
            
            // –ö–µ–∑–¥–µ–π—Å–æ“õ –ø–∏—Ü—Ü–∞ —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞—É
            if (!pizzaType) {
                pizzaType = pizzaTypes[Math.floor(Math.random() * pizzaTypes.length)];
            }
            
            // –ü–∏—Ü—Ü–∞–Ω—ã“£ ”ô—Ä –±”©–ª—ñ–≥—ñ “Ø—à—ñ–Ω —Å–µ–∫—Ç–æ—Ä–ª–∞—Ä–¥—ã —Å–∞–ª—É
            for (let i = 0; i < denominator; i++) {
                const slice = document.createElement('div');
                slice.className = 'pizza-slice';
                slice.style.transform = `rotate(${i * (360 / denominator)}deg)`;
                
                // –ë–æ—è—É “Ø—à—ñ–Ω ”ô—Å–µ—Ä - ”ô—Ä –±”©–ª—ñ–∫—Ç—ñ —Ç“Ø—Ä–ª—ñ —Ç“Ø—Å–ø–µ–Ω –±–æ—è—É
                const isFilled = i < numerator;
                slice.style.background = `conic-gradient(
                    ${isFilled ? pizzaType.color1 : '#666666'} 0% 100%
                )`;
                
                pizza.appendChild(slice);
            }
            
            // –ù”ô—Ç–∏–∂–µ –ø–∏—Ü—Ü–∞—Å—ã–Ω–¥–∞ —Å–∞–Ω–¥–∞—Ä–¥—ã –∫”©—Ä—Å–µ—Ç–ø–µ—É
            if (pizzaId !== 'result-pizza') {
                const label = document.createElement('div');
                label.className = 'pizza-label';
                label.innerHTML = `<span class="math-fraction"><span class="numerator">${numerator}</span><span class="denominator">${denominator}</span></span>`;
                label.id = pizzaId + '-label';
                pizza.appendChild(label);
            }
            
            // –ù”ô—Ç–∏–∂–µ –ø–∏—Ü—Ü–∞—Å—ã–Ω –±–æ—è—É
            if (pizzaId === 'result-pizza') {
                const percentage = (numerator / denominator) * 100;
                pizza.style.background = `conic-gradient(
                    ${pizzaType.color1} 0% ${percentage}%, 
                    ${pizzaType.color2} ${percentage}% 100%
                )`;
            }
            
            return pizzaType.name;
        }
        
        function calculatePizza() {
            const num1 = parseInt(document.getElementById('num1').value);
            const den1 = parseInt(document.getElementById('den1').value);
            const num2 = parseInt(document.getElementById('num2').value);
            const den2 = parseInt(document.getElementById('den2').value);
            
            // –ë”©–ª—à–µ–∫—Ç–µ—Ä–¥—ñ “õ–æ—Å—É
            const commonDenominator = den1 * den2;
            const newNum1 = num1 * den2;
            const newNum2 = num2 * den1;
            const resultNum = newNum1 + newNum2;
            const resultDen = commonDenominator;
            
            // –ñ–∞–π –±”©–ª—à–µ–∫–∫–µ –∫–µ–ª—Ç—ñ—Ä—É
            const simplified = simplifyFraction(resultNum, resultDen);
            const simplifiedNum = simplified.numerator;
            const simplifiedDen = simplified.denominator;
            
            // –ü–∏—Ü—Ü–∞–ª–∞—Ä–¥—ã —Å–∞–ª—É
            drawPizza('pizza1', num1, den1);
            drawPizza('pizza2', num2, den2);
            const pizzaName = drawPizza('result-pizza', simplifiedNum, simplifiedDen);
            
            return { simplifiedNum, simplifiedDen, pizzaName };
        }
        
        document.getElementById('check-pizza').addEventListener('click', function() {
            const { simplifiedNum, simplifiedDen, pizzaName } = calculatePizza();
            
            const userNum = parseInt(document.getElementById('user-result-num').value);
            const userDen = parseInt(document.getElementById('user-result-den').value);
            
            if (userNum && userDen) {
                const userSimplified = simplifyFraction(userNum, userDen);
                
                if (userSimplified.numerator === simplifiedNum && userSimplified.denominator === simplifiedDen) {
                    const compliment = pizzaCompliments[Math.floor(Math.random() * pizzaCompliments.length)];
                    document.getElementById('pizza-feedback').innerHTML = 
                        `${compliment} ${pizzaName} –ø–∏—Ü—Ü–∞—Å—ã –¥–∞–π—ã–Ω!`;
                    document.getElementById('pizza-feedback').style.color = '#4CAF50';
                    
                    // –ö–≤–µ—Å—Ç—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
                    pizzaCompleted++;
                    updateQuest('pizza', pizzaCompleted);
                    
                    // –ñ–∞—É–∞–ø ”©—Ä—ñ—Å—Ç–µ—Ä—ñ–Ω —Ç–∞–∑–∞–ª–∞—É
                    document.getElementById('user-result-num').value = '';
                    document.getElementById('user-result-den').value = '';
                } else {
                    document.getElementById('pizza-feedback').innerHTML = 
                        `“ö–∞—Ç–µ! –ü–∏—Ü—Ü–∞–ª–∞—Ä–¥—ã —Å–∞–ª—ã—Å—Ç—ã—Ä—ã–ø, –¥“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç—ã —Ç–∞–±—ã“£—ã–∑.`;
                    document.getElementById('pizza-feedback').style.color = '#f44336';
                }
            } else {
                document.getElementById('pizza-feedback').textContent = '–ñ–∞—É–∞–ø—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!';
                document.getElementById('pizza-feedback').style.color = '#f44336';
            }
        });
        
        document.getElementById('random-pizza').addEventListener('click', function() {
            const denominators = [2, 3, 4, 6, 8];
            const den1 = denominators[Math.floor(Math.random() * denominators.length)];
            const den2 = denominators[Math.floor(Math.random() * denominators.length)];
            
            document.getElementById('den1').value = den1;
            document.getElementById('den2').value = den2;
            document.getElementById('num1').value = Math.floor(Math.random() * (den1 - 1)) + 1;
            document.getElementById('num2').value = Math.floor(Math.random() * (den2 - 1)) + 1;
            
            calculatePizza();
            
            // –ñ–∞—É–∞–ø ”©—Ä—ñ—Å—Ç–µ—Ä—ñ–Ω —Ç–∞–∑–∞–ª–∞—É
            document.getElementById('user-result-num').value = '';
            document.getElementById('user-result-den').value = '';
            document.getElementById('pizza-feedback').textContent = '';
        });
        
        // –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä–ª–∞—Ä –±–µ–∫–µ—Ç—ñ —Å—Ç–∞–Ω—Ü–∏—è—Å—ã (–∂–∞“£–∞—Ä—Ç—ã–ª“ì–∞–Ω)
        let transformCompleted = 0;
        let currentMixed = { whole: 2, num: 3, den: 4 };
        let currentImproper = { num: 7, den: 3 };

        function updateTransformDisplay() {
            document.getElementById('current-whole').textContent = currentMixed.whole;
            document.getElementById('current-num').textContent = currentMixed.num;
            document.getElementById('current-den').textContent = currentMixed.den;
            
            document.getElementById('current-improper-num').textContent = currentImproper.num;
            document.getElementById('current-improper-den').textContent = currentImproper.den;
        }

        document.getElementById('check-to-improper').addEventListener('click', function() {
            const userNum = parseInt(document.getElementById('user-improper-num').value);
            const userDen = parseInt(document.getElementById('user-improper-den').value);
            
            const correctNum = currentMixed.whole * currentMixed.den + currentMixed.num;
            const correctDen = currentMixed.den;
            
            if (userNum && userDen) {
                const userSimplified = simplifyFraction(userNum, userDen);
                const correctSimplified = simplifyFraction(correctNum, correctDen);
                
                if (userSimplified.numerator === correctSimplified.numerator && 
                    userSimplified.denominator === correctSimplified.denominator) {
                    document.getElementById('transform-result').innerHTML = 
                        `‚úÖ –î“±—Ä—ã—Å! <span class="math-mixed">${currentMixed.whole} <span class="math-fraction"><span class="numerator">${currentMixed.num}</span><span class="denominator">${currentMixed.den}</span></span></span> = <span class="math-fraction"><span class="numerator">${correctSimplified.numerator}</span><span class="denominator">${correctSimplified.denominator}</span></span>`;
                    document.getElementById('transform-result').style.color = '#4CAF50';
                    
                    transformCompleted++;
                    updateQuest('transform', transformCompleted);
                    
                    // –¢–∞–∑–∞—Ä—Ç—É
                    document.getElementById('user-improper-num').value = '';
                    document.getElementById('user-improper-den').value = '';
                } else {
                    document.getElementById('transform-result').innerHTML = 
                        `‚ùå “ö–∞—Ç–µ! –î“±—Ä—ã—Å –∂–∞—É–∞–ø: <span class="math-fraction"><span class="numerator">${correctSimplified.numerator}</span><span class="denominator">${correctSimplified.denominator}</span></span>`;
                    document.getElementById('transform-result').style.color = '#f44336';
                }
            } else {
                document.getElementById('transform-result').textContent = '–ñ–∞—É–∞–ø—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!';
                document.getElementById('transform-result').style.color = '#f44336';
            }
        });

        document.getElementById('check-to-mixed').addEventListener('click', function() {
            const userWhole = parseInt(document.getElementById('user-mixed-whole').value) || 0;
            const userNum = parseInt(document.getElementById('user-mixed-num').value);
            const userDen = parseInt(document.getElementById('user-mixed-den').value);
            
            const correctWhole = Math.floor(currentImproper.num / currentImproper.den);
            const correctNum = currentImproper.num % currentImproper.den;
            const correctDen = currentImproper.den;
            
            if (userNum !== null && userDen) {
                const userSimplified = simplifyFraction(userNum, userDen);
                const correctSimplified = simplifyFraction(correctNum, correctDen);
                
                if (userWhole === correctWhole && 
                    userSimplified.numerator === correctSimplified.numerator && 
                    userSimplified.denominator === correctSimplified.denominator) {
                    document.getElementById('transform-result').innerHTML = 
                        `‚úÖ –î“±—Ä—ã—Å! <span class="math-fraction"><span class="numerator">${currentImproper.num}</span><span class="denominator">${currentImproper.den}</span></span> = <span class="math-mixed">${correctWhole} <span class="math-fraction"><span class="numerator">${correctSimplified.numerator}</span><span class="denominator">${correctSimplified.denominator}</span></span></span>`;
                    document.getElementById('transform-result').style.color = '#4CAF50';
                    
                    transformCompleted++;
                    updateQuest('transform', transformCompleted);
                    
                    // –¢–∞–∑–∞—Ä—Ç—É
                    document.getElementById('user-mixed-whole').value = '';
                    document.getElementById('user-mixed-num').value = '';
                    document.getElementById('user-mixed-den').value = '';
                } else {
                    document.getElementById('transform-result').innerHTML = 
                        `‚ùå “ö–∞—Ç–µ! –î“±—Ä—ã—Å –∂–∞—É–∞–ø: <span class="math-mixed">${correctWhole} <span class="math-fraction"><span class="numerator">${correctSimplified.numerator}</span><span class="denominator">${correctSimplified.denominator}</span></span></span>`;
                    document.getElementById('transform-result').style.color = '#f44336';
                }
            } else {
                document.getElementById('transform-result').textContent = '–ñ–∞—É–∞–ø—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!';
                document.getElementById('transform-result').style.color = '#f44336';
            }
        });

        document.getElementById('random-transform').addEventListener('click', function() {
            // –ö–µ–∑–¥–µ–π—Å–æ“õ –∞—Ä–∞–ª–∞—Å —Å–∞–Ω
            currentMixed.whole = Math.floor(Math.random() * 5) + 1;
            currentMixed.den = Math.floor(Math.random() * 8) + 2;
            currentMixed.num = Math.floor(Math.random() * (currentMixed.den - 1)) + 1;
            
            // –ö–µ–∑–¥–µ–π—Å–æ“õ –±“±—Ä—ã—Å –±”©–ª—à–µ–∫
            currentImproper.den = Math.floor(Math.random() * 8) + 2;
            currentImproper.num = Math.floor(Math.random() * 5) + currentImproper.den + 1;
            
            updateTransformDisplay();
            document.getElementById('transform-result').textContent = '';
        });
        
        // –ñ—ã–ª–¥–∞–º –ø–æ–µ–∑–¥ —Å—Ç–∞–Ω—Ü–∏—è—Å—ã (–∂–∞“£–∞—Ä—Ç—ã–ª“ì–∞–Ω)
        let currentTrainProblem = {
            distance: { num: 4, den: 5 },
            time: { num: 2, den: 3 }
        };
        let trainCompleted = 0;

        function updateTrainDisplay() {
            document.getElementById('distance-num').textContent = currentTrainProblem.distance.num;
            document.getElementById('distance-den').textContent = currentTrainProblem.distance.den;
            document.getElementById('time-num').textContent = currentTrainProblem.time.num;
            document.getElementById('time-den').textContent = currentTrainProblem.time.den;
        }

        document.getElementById('calculate-train').addEventListener('click', function() {
            const userNum = parseInt(document.getElementById('train-result-num').value);
            const userDen = parseInt(document.getElementById('train-result-den').value);
            
            // –ñ—ã–ª–¥–∞–º–¥—ã“õ = “ö–∞—à—ã“õ—Ç—ã“õ / –£–∞“õ—ã—Ç
            const resultNum = currentTrainProblem.distance.num * currentTrainProblem.time.den;
            const resultDen = currentTrainProblem.distance.den * currentTrainProblem.time.num;
            
            if (userNum && userDen) {
                const simplified = simplifyFraction(resultNum, resultDen);
                const userSimplified = simplifyFraction(userNum, userDen);
                
                if (userSimplified.numerator === simplified.numerator && 
                    userSimplified.denominator === simplified.denominator) {
                    document.getElementById('train-result').innerHTML = 
                        `‚úÖ –î“±—Ä—ã—Å! –ñ—ã–ª–¥–∞–º–¥—ã“õ: <span class="math-fraction"><span class="numerator">${simplified.numerator}</span><span class="denominator">${simplified.denominator}</span></span> –∫–º/—Å–∞“ì`;
                    document.getElementById('train-result').style.color = '#4CAF50';
                    
                    // –ü–æ–π—ã–∑ –∞–Ω–∏–º–∞—Ü–∏—è—Å—ã
                    const train = document.getElementById('train-element');
                    train.style.left = '0';
                    setTimeout(() => {
                        train.style.transition = 'left 2s ease-in-out';
                        train.style.left = 'calc(100% - 80px)';
                    }, 100);
                    
                    trainCompleted++;
                    updateQuest('train', trainCompleted);
                    
                    // –¢–∞–∑–∞—Ä—Ç—É
                    document.getElementById('train-result-num').value = '';
                    document.getElementById('train-result-den').value = '';
                } else {
                    document.getElementById('train-result').innerHTML = 
                        `‚ùå “ö–∞—Ç–µ! –î“±—Ä—ã—Å –∂–∞—É–∞–ø: <span class="math-fraction"><span class="numerator">${simplified.numerator}</span><span class="denominator">${simplified.denominator}</span></span> –∫–º/—Å–∞“ì`;
                    document.getElementById('train-result').style.color = '#f44336';
                }
            } else {
                document.getElementById('train-result').textContent = '–ñ–∞—É–∞–ø—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!';
                document.getElementById('train-result').style.color = '#f44336';
            }
        });

        document.getElementById('random-train').addEventListener('click', function() {
            const distances = [
                {num: 3, den: 4}, {num: 2, den: 3}, {num: 5, den: 6}, 
                {num: 1, den: 2}, {num: 4, den: 5}, {num: 3, den: 8}
            ];
            const times = [
                {num: 1, den: 2}, {num: 2, den: 3}, {num: 3, den: 4}, 
                {num: 1, den: 3}, {num: 2, den: 5}, {num: 3, den: 5}
            ];
            
            currentTrainProblem.distance = distances[Math.floor(Math.random() * distances.length)];
            currentTrainProblem.time = times[Math.floor(Math.random() * times.length)];
            
            updateTrainDisplay();
            document.getElementById('train-result').textContent = '';
            
            // –ü–æ–π—ã–∑–¥—ã –±–∞—Å—Ç–∞–ø“õ—ã –æ—Ä–Ω—ã–Ω–∞ “õ–∞–π—Ç–∞—Ä—É
            const train = document.getElementById('train-element');
            train.style.transition = 'none';
            train.style.left = '0';
        });
        
        // –®–µ–±–µ—Ä—Ö–∞–Ω–∞ —Å—Ç–∞–Ω—Ü–∏—è—Å—ã
        let currentWorkshopProblems = {
            problem1: {
                amount: { whole: 2, num: 1, den: 2 },
                answer: { whole: 1, num: 1, den: 4 }
            },
            problem2: {
                length: { whole: 4, num: 3, den: 8 },
                parts: 3,
                answer: { whole: 1, num: 11, den: 24 }
            }
        };
        let workshopCompleted = 0;
        
        function updateWorkshopDisplay() {
            document.getElementById('recipe-amount').innerHTML = 
                `<span class="math-mixed">${currentWorkshopProblems.problem1.amount.whole} <span class="math-fraction"><span class="numerator">${currentWorkshopProblems.problem1.amount.num}</span><span class="denominator">${currentWorkshopProblems.problem1.amount.den}</span></span></span>`;
            document.getElementById('stick-length').innerHTML = 
                `<span class="math-mixed">${currentWorkshopProblems.problem2.length.whole} <span class="math-fraction"><span class="numerator">${currentWorkshopProblems.problem2.length.num}</span><span class="denominator">${currentWorkshopProblems.problem2.length.den}</span></span></span>`;
            document.getElementById('stick-parts').textContent = currentWorkshopProblems.problem2.parts;
        }
        
        document.getElementById('check-workshop-1').addEventListener('click', function() {
            const userWhole = parseInt(document.getElementById('workshop-whole-1').value) || 0;
            const userNum = parseInt(document.getElementById('workshop-num-1').value);
            const userDen = parseInt(document.getElementById('workshop-den-1').value);
            
            const correct = currentWorkshopProblems.problem1.answer;
            
            if (userNum && userDen) {
                // –ï–≥–µ—Ä –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã –±”©–ª—à–µ–∫—Ç—ñ –∂–∞–π—ã–ª—Ç—Å–∞ –¥–∞, –±—ñ–∑ –æ–Ω—ã “õ–∞–±—ã–ª–¥–∞–π–º—ã–∑
                const userSimplified = simplifyFraction(userNum, userDen);
                const correctSimplified = simplifyFraction(correct.num, correct.den);
                
                if (userWhole === correct.whole && userSimplified.numerator === correctSimplified.numerator && userSimplified.denominator === correctSimplified.denominator) {
                    document.getElementById('workshop-result').innerHTML = 
                        '–î“±—Ä—ã—Å! –ñ–∞—Ä—Ç—ã —Ç–æ—Ä—Ç –ø—ñ—Å—ñ—Ä—É “Ø—à—ñ–Ω <span class="math-mixed">' + correct.whole + ' <span class="math-fraction"><span class="numerator">' + correct.num + '</span><span class="denominator">' + correct.den + '</span></span></span> —Å—Ç–∞–∫–∞–Ω “±–Ω “õ–∞–∂–µ—Ç.';
                    document.getElementById('workshop-result').style.color = '#4CAF50';
                    
                    // –¢–æ—Ä—Ç —Å—É—Ä–µ—Ç—ñ–Ω –∫”©—Ä—Å–µ—Ç—É
                    const cakeVisual = document.getElementById('cake-visual');
                    cakeVisual.classList.add('show');
                    setTimeout(() => {
                        cakeVisual.classList.remove('show');
                    }, 2000);
                    
                    // –ö–≤–µ—Å—Ç—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
                    workshopCompleted++;
                    updateQuest('workshop', workshopCompleted);
                } else {
                    document.getElementById('workshop-result').innerHTML = 
                        '“ö–∞—Ç–µ! –î“±—Ä—ã—Å –∂–∞—É–∞–ø: <span class="math-mixed">' + correct.whole + ' <span class="math-fraction"><span class="numerator">' + correct.num + '</span><span class="denominator">' + correct.den + '</span></span></span> —Å—Ç–∞–∫–∞–Ω';
                    document.getElementById('workshop-result').style.color = '#f44336';
                }
            } else {
                document.getElementById('workshop-result').textContent = '–ñ–∞—É–∞–ø—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!';
                document.getElementById('workshop-result').style.color = '#f44336';
            }
        });
        
        document.getElementById('check-workshop-2').addEventListener('click', function() {
            const userWhole = parseInt(document.getElementById('workshop-whole-2').value) || 0;
            const userNum = parseInt(document.getElementById('workshop-num-2').value);
            const userDen = parseInt(document.getElementById('workshop-den-2').value);
            
            const correct = currentWorkshopProblems.problem2.answer;
            
            if (userNum && userDen) {
                // –ï–≥–µ—Ä –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã –±”©–ª—à–µ–∫—Ç—ñ –∂–∞–π—ã–ª—Ç—Å–∞ –¥–∞, –±—ñ–∑ –æ–Ω—ã “õ–∞–±—ã–ª–¥–∞–π–º—ã–∑
                const userSimplified = simplifyFraction(userNum, userDen);
                const correctSimplified = simplifyFraction(correct.num, correct.den);
                
                if (userWhole === correct.whole && userSimplified.numerator === correctSimplified.numerator && userSimplified.denominator === correctSimplified.denominator) {
                    document.getElementById('workshop-result').innerHTML = 
                        '–î“±—Ä—ã—Å! ”ò—Ä –±”©–ª—ñ–∫—Ç—ñ“£ “±–∑—ã–Ω–¥—ã“ì—ã <span class="math-mixed">' + correct.whole + ' <span class="math-fraction"><span class="numerator">' + correct.num + '</span><span class="denominator">' + correct.den + '</span></span></span> –º–µ—Ç—Ä.';
                    document.getElementById('workshop-result').style.color = '#4CAF50';
                    
                    // –¢–∞—è“õ —Å—É—Ä–µ—Ç—ñ–Ω –∫”©—Ä—Å–µ—Ç—É
                    const stickVisual = document.getElementById('stick-visual');
                    stickVisual.classList.add('show');
                    setTimeout(() => {
                        stickVisual.classList.remove('show');
                    }, 2000);
                    
                    // –ö–≤–µ—Å—Ç—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
                    workshopCompleted++;
                    updateQuest('workshop', workshopCompleted);
                } else {
                    document.getElementById('workshop-result').innerHTML = 
                        '“ö–∞—Ç–µ! –î“±—Ä—ã—Å –∂–∞—É–∞–ø: <span class="math-mixed">' + correct.whole + ' <span class="math-fraction"><span class="numerator">' + correct.num + '</span><span class="denominator">' + correct.den + '</span></span></span> –º–µ—Ç—Ä';
                    document.getElementById('workshop-result').style.color = '#f44336';
                }
            } else {
                document.getElementById('workshop-result').textContent = '–ñ–∞—É–∞–ø—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!';
                document.getElementById('workshop-result').style.color = '#f44336';
            }
        });
        
        document.getElementById('random-workshop').addEventListener('click', function() {
            // –ë—ñ—Ä—ñ–Ω—à—ñ –µ—Å–µ–ø—Ç—ñ –∫–µ–∑–¥–µ–π—Å–æ“õ –∂–∞—Å–∞—É
            const recipeAmounts = [
                {whole: 3, num: 1, den: 2, answer: {whole: 1, num: 3, den: 4}},
                {whole: 2, num: 3, den: 4, answer: {whole: 1, num: 3, den: 8}},
                {whole: 4, num: 1, den: 3, answer: {whole: 2, num: 1, den: 6}}
            ];
            
            const recipe = recipeAmounts[Math.floor(Math.random() * recipeAmounts.length)];
            currentWorkshopProblems.problem1.amount = recipe;
            currentWorkshopProblems.problem1.answer = recipe.answer;
            
            // –ï–∫—ñ–Ω—à—ñ –µ—Å–µ–ø—Ç—ñ –∫–µ–∑–¥–µ–π—Å–æ“õ –∂–∞—Å–∞—É
            const stickLengths = [
                {whole: 5, num: 1, den: 2, parts: 2, answer: {whole: 2, num: 3, den: 4}},
                {whole: 3, num: 3, den: 4, parts: 3, answer: {whole: 1, num: 1, den: 4}},
                {whole: 6, num: 1, den: 8, parts: 4, answer: {whole: 1, num: 25, den: 32}}
            ];
            
            const stick = stickLengths[Math.floor(Math.random() * stickLengths.length)];
            currentWorkshopProblems.problem2.length = stick;
            currentWorkshopProblems.problem2.parts = stick.parts;
            currentWorkshopProblems.problem2.answer = stick.answer;
            
            updateWorkshopDisplay();
            
            // –ñ–∞—É–∞–ø—Ç–∞—Ä–¥—ã —Ç–∞–∑–∞–ª–∞—É
            document.getElementById('workshop-whole-1').value = '';
            document.getElementById('workshop-num-1').value = '';
            document.getElementById('workshop-den-1').value = '';
            
            document.getElementById('workshop-whole-2').value = '';
            document.getElementById('workshop-num-2').value = '';
            document.getElementById('workshop-den-2').value = '';
            
            document.getElementById('workshop-result').textContent = '';
        });
        
        document.getElementById('reset-workshop').addEventListener('click', function() {
            document.getElementById('workshop-whole-1').value = '';
            document.getElementById('workshop-num-1').value = '';
            document.getElementById('workshop-den-1').value = '';
            
            document.getElementById('workshop-whole-2').value = '';
            document.getElementById('workshop-num-2').value = '';
            document.getElementById('workshop-den-2').value = '';
            
            document.getElementById('workshop-result').textContent = '';
        });
        
        // –ü–æ–ø–∞–ø—Ç–∞—Ä–¥—ã –±–∞—Å“õ–∞—Ä—É
        document.getElementById('close-quest').addEventListener('click', function() {
            document.getElementById('quest-complete').classList.remove('show');
        });
        
        document.getElementById('restart-game').addEventListener('click', function() {
            location.reload();
        });
        
        // –ë–∞—Å—Ç–∞–ø“õ—ã –º”ô–Ω–¥–µ—Ä–¥—ñ –æ—Ä–Ω–∞—Ç—É
        window.onload = function() {
            updateTransformDisplay();
            updateTrainDisplay();
            updateWorkshopDisplay();
            updateProgress();
            updateRank();
            
            // –ü–∏—Ü—Ü–∞–ª–∞—Ä–¥—ã –±–∞—Å—Ç–∞–ø“õ—ã –∫“Ø–π–≥–µ –∫–µ–ª—Ç—ñ—Ä—É
            drawPizza('pizza1', 1, 2);
            drawPizza('pizza2', 1, 4);
            drawPizza('result-pizza', 3, 4);
        };
    </script>
</body>
</html>
